<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head th:insert="fragments/head :: head">
    <title>thống kê </title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<body>
<div th:replace="admin/layout/header"></div>

<div class="row">
<!--content -->
<div th:replace="admin/layout/sidebar"></div>
    <div class="col-10 mt-3">
        <h2>Biểu đồ Doanh thu theo Tháng</h2>

  <div class="container">


      <!-- Canvas để vẽ biểu đồ -->
      <canvas th:id="revenueChart"></canvas>

      <script th:inline="javascript">
          /* Dữ liệu doanh thu từ controller */
          var revenueDataList = /*[[${revenueDataList}]]*/ [];

          /* Chuyển đổi dữ liệu thành các mảng riêng lẻ cho labels và data */
          var labels = revenueDataList.map(function (data) {
              return data.month + '/' + data.year; // Tháng/Năm
          });

          var data = revenueDataList.map(function (data) {
              return data.total; // Doanh thu
          });

          /* Vẽ biểu đồ cột */
          var ctx = document.getElementById('revenueChart').getContext('2d');
          var myChart = new Chart(ctx, {
              type: 'bar',
              data: {
                  labels: labels,
                  datasets: [{
                      label: 'Doanh thu (VNĐ)',
                      data: data,
                      backgroundColor: 'rgba(75, 192, 192, 0.2)',
                      borderColor: 'rgba(75, 192, 192, 1)',
                      borderWidth: 1
                  }]
              },
              options: {
                  scales: {
                      y: {
                          beginAtZero: true
                      }
                  }
              }
          });
      </script>
  </div>
    </div>
</div>

</body>
</html>